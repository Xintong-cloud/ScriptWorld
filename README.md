# ğŸ­ ScriptWorld â€” Multi-Agent Scripted Chatroom  
*(Murder Mystery / Roleplay Engine)*

ScriptWorld æ˜¯ä¸€ä¸ªé¢å‘â€œå‰§æœ¬æ€ / æ¡Œæ¸¸ RP / ç¤¾äº¤æ¨ç†æ¸¸æˆâ€çš„ **å¤šæ™ºèƒ½ä½“èŠå¤©å®¤å¼•æ“**ã€‚  
ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªæˆ¿é—´ä¸­è¿è¡Œå¤šä¸ª AI Agentï¼Œé€šè¿‡ **Lobby æ¥å¾… â†’ DM ä¸»æŒ â†’ NPC/ç©å®¶äº’åŠ¨** çš„æµç¨‹ï¼Œå¿«é€Ÿæ­å»ºä¸€ä¸ªå¯æ‰©å±•ã€å¯å¤ç”¨çš„ã€Œå‰§æœ¬ä¸–ç•Œã€ã€‚

---

## âœ¨ é¡¹ç›®äº®ç‚¹

- âœ… å¤šæ™ºèƒ½ä½“èŠå¤©å®¤ï¼šå¤šä¸ª AI Agent åœ¨åŒä¸€ç©ºé—´åä½œæ¨è¿›å‰§æƒ…  
- âœ… **DM Agentï¼ˆä¸»æŒäººï¼‰**ï¼šç»Ÿä¸€æŒæ§æµç¨‹ã€è§„åˆ™ã€èŠ‚å¥ä¸ä¿¡æ¯å®‰å…¨  
- âœ… **Lobby Agentï¼ˆæ¥å¾…å®˜ï¼‰**ï¼šå¼•å¯¼ç©å®¶é€‰æœ¬ï¼Œå¹¶å°†ç»“æœç§å‘ç»™ DM  
- âœ… **NPC Agentsï¼ˆè§’è‰²ä»£ç†ï¼‰**ï¼šå¯æ’æ‹”çš„äººç‰© / è¯äºº / åæ´¾ / è·¯äººç³»ç»Ÿ  
- âœ… å‰§æœ¬ / äº‹ä»¶ / å·¥å…· / Mod æ¨¡å—åŒ–ï¼šç»“æ„æ¸…æ™°ï¼Œæ–¹ä¾¿æ‰©å±•æ–°ä¸–ç•Œ  
- âœ… ç½‘ç»œé…ç½® + æ•°æ®æŒä¹…åŒ–ï¼šå†…ç½® Network é…ç½®ä¸ DB å­˜å‚¨ä¼šè¯çŠ¶æ€  

---

## ğŸ¯ é€‚ç”¨åœºæ™¯

ScriptWorld é€‚åˆç”¨æ¥ï¼š

- æ­å»ºä¸€ä¸ª **AI é©±åŠ¨çš„å‰§æœ¬æ€å¹³å°**
- è¿è¡Œæµç¨‹ä¸¥è°¨çš„ **äº’åŠ¨å¼è§’è‰²æ‰®æ¼” / ç¤¾äº¤æ¨ç†æ¸¸æˆ**
- è¿›è¡Œ **å¤š Agent åä½œç ”ç©¶**ï¼ˆæ¥å¾… â†’ ä¸»æŒ â†’ NPC ç¾¤ä½“æ¼”åŒ–ï¼‰
- å¿«é€Ÿåˆ¶ä½œã€Œä¸–ç•Œ / å‰§æœ¬ / è§’è‰²ã€å¹¶æŒç»­è¿­ä»£
- ä½œä¸ºä½ çš„ **å¤šæ™ºèƒ½ä½“è„šæœ¬å¼•æ“åº•åº§**ï¼Œæ‰¿è½½æ›´å¤šç©æ³•

---

## ğŸ—‚ï¸ è¯´æ˜æ–‡æ¡£
https://ncnc2x027mdk.feishu.cn/wiki/K1Siw2R4Niwxw3kE1WocyTSPnVd?from=from_copylink

---

## ğŸ¥ è§†é¢‘å±•ç¤º(ç‚¹å‡»å›¾ç‰‡å¯è·³è½¬é“¾æ¥æŸ¥çœ‹)
https://youtu.be/EA3FDZPn1BM
[![Demo Video](images/youtube.jpg)](https://youtu.be/kjzcFEUG21w)

---

## ğŸ§  æ¶æ„æ¦‚è§ˆ

ScriptWorld çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª **Networkï¼ˆç½‘ç»œï¼‰**ï¼Œç”¨äºè¿æ¥æˆ¿é—´ã€ç©å®¶ä¸å„ç±» Agentã€‚

!<img src="images/structure.jpg" alt="ScriptWorld structure" width="600">



### æ ¸å¿ƒæ¨¡å—è¯´æ˜

| æ¨¡å— | ä½œç”¨ |
|----|----|
| `network.yaml` | å®šä¹‰èŠå¤©å®¤ç½‘ç»œã€æˆ¿é—´ã€Agent è·¯ç”± |
| `agents/` | Agent å®šä¹‰ï¼šLobbyã€DMã€NPC |
| `scenarios/` | åœºæ™¯ / ä¸–ç•Œè§‚ / æµç¨‹ç»„ç»‡ |
| `events/` | äº‹ä»¶ç³»ç»Ÿï¼šé˜¶æ®µæ¨è¿›ã€çº¿ç´¢å‘æ”¾ |
| `tools/` | Agent å¯è°ƒç”¨çš„å·¥å…· |
| `scripts/` | å‰§æœ¬å†…å®¹ï¼ˆæ¡ˆä»¶ã€è§’è‰²ã€çº¿ç´¢ã€çœŸç›¸ï¼‰ |
| `mods/` | å¯é€‰æ‰©å±•ï¼šè‡ªå®šä¹‰è§„åˆ™ä¸ç©æ³•æ’ä»¶ |
| `network.db` | æŒä¹…åŒ–å­˜å‚¨ï¼ˆä¼šè¯ã€çŠ¶æ€ã€ç©å®¶æ•°æ®ï¼‰ |

---

## ğŸ§© å·²å†…ç½®çš„ Agentï¼ˆé»˜è®¤ Agent ä½“ç³»ï¼‰

!<img src="images/agents.jpg" alt="agents & users interactions" width="700">

### ğŸ© DM Agentï¼ˆé€šç”¨ä¸»æŒäººï¼‰

æ–‡ä»¶ï¼š`agents/dm.yaml`

DM æ˜¯ç³»ç»Ÿä¸­çš„ **ä¸»æŒäºº / è£åˆ¤ / å™äº‹å¼•æ“**ï¼Œè´Ÿè´£ï¼š

- è¯»å–å¹¶ç†è§£å‰§æœ¬ï¼ˆå« DM-only çœŸç›¸ï¼‰
- åˆ†é…èº«ä»½ / è§’è‰²å¡
- ç»´æŒè§„åˆ™ä¸€è‡´æ€§ã€å¤„ç†å¼‚å¸¸
- æ§åˆ¶èŠ‚å¥ï¼šå¼€åœº â†’ å›åˆ â†’ çº¿ç´¢ â†’ è®¨è®º â†’ æŠ•ç¥¨ â†’ ç»“å±€
- ä¿¡æ¯éš”ç¦»ï¼šç¡®ä¿ç©å®¶åªè·å–åº”å¾—ä¿¡æ¯

**æ¨èé…ç½®æ–¹å‘ï¼š**
- è¾ƒä½ `temperature`ï¼ˆç¨³å®šæ¨è¿›ï¼‰
- è¾ƒé«˜ `max_tokens`ï¼ˆé•¿é€»è¾‘ä¸å¼•å¯¼ï¼‰
- å¢åŠ  `reaction_delay`ï¼ˆæ›´åƒçœŸäººä¸»æŒï¼‰

---

### ğŸ› Lobby Agentï¼ˆå¤§å…æ¥å¾…å®˜ï¼‰

æ–‡ä»¶ï¼š`agents/lobby.yaml`

Lobby åœ¨ `#general` æˆ¿é—´å·¥ä½œï¼Œè´Ÿè´£ï¼š

- å¼•å¯¼ç©å®¶è¿›è¡Œé€‰æœ¬ / é…ç½®  
  - äººæ•°  
  - éš¾åº¦  
  - æ°›å›´ï¼ˆæ¬¢ä¹ / ä¸¥è‚ƒ / ç¡¬æ ¸ï¼‰  
  - æ—¶é•¿  
  - ä¸»é¢˜  
- å°†é€‰æ‹©ç»“æœ **ç§å‘ç»™ DM**ï¼Œç”± DM åšå‡†å¤‡å¹¶å¼€å±€  

ç©å®¶ä½“éªŒæµç¨‹ï¼š

> ç©å®¶è¿›å…¥ â†’ Lobby æ¥å¾…é€‰æœ¬ â†’ DM å¼€å±€ä¸»æŒ â†’ NPC / ç©å®¶æ¨ç†

---

### ğŸ­ NPC Agentsï¼ˆè§’è‰²ä»£ç†ï¼‰

ç›®å½•ï¼š`agents/npcs/`

NPC Agent å¯ä»¥ä½œä¸ºï¼š

- æ•…äº‹äººç‰© / è¯äºº / è·¯äºº
- åæ´¾ / é˜´è°‹å®¶
- ç¤¾äº¤æ¨ç†æ¸¸æˆä¸­çš„ã€Œå‡ç©å®¶ã€

æ”¯æŒå³æ’å³ç”¨ï¼š  
åªéœ€æ–°å¢ YAML å¹¶åœ¨ `network.yaml` ä¸­é…ç½®è·¯ç”±ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¼‰å®‰è£… OpenAgentsï¼ˆéœ€è¦ Python ç¯å¢ƒï¼‰

åœ¨å¼€å§‹ä½¿ç”¨ ScriptWorld ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å®‰è£… OpenAgentsã€‚

```bash
pip install openagents
```

### 2ï¼‰æ¿€æ´» Conda ç¯å¢ƒ

æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Conda ç®¡ç†ä¾èµ–å’Œç¯å¢ƒï¼Œç¡®ä¿ç³»ç»Ÿç¯å¢ƒçš„å…¼å®¹æ€§ã€‚

```bash
conda activate openagents
```

### 3ï¼‰å¯åŠ¨å¤šæ™ºèƒ½ä½“ç½‘ç»œï¼ˆAgent Networkï¼‰

å¯åŠ¨å¤šæ™ºèƒ½ä½“ç½‘ç»œæœåŠ¡ï¼ŒåŠ è½½ ScriptWorld çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„å¹¶åˆå§‹åŒ–æ™ºèƒ½ä½“é€šä¿¡æœºåˆ¶ã€‚

```bash
openagents network start ~/script_world
```

### 4ï¼‰é…ç½®å¤§æ¨¡å‹ç›¸å…³ç¯å¢ƒå˜é‡

é…ç½®é»˜è®¤ä½¿ç”¨çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åŠå…¶è®¿é—®æ–¹å¼ã€‚

```bash
export DEFAULT_LLM_MODEL_NAME="openai-gpt-5-mini"
export DEFAULT_LLM_PROVIDER="openai-compatible"
export DEFAULT_LLM_API_KEY="YOUR_API_KEY"
export DEFAULT_LLM_BASE_URL="https://model-gateway.openagents.org/v1"
```

### 5ï¼‰å¯åŠ¨æ™ºèƒ½ä½“ï¼ˆAgentï¼‰

å¯åŠ¨ä»¥ä¸‹æ™ºèƒ½ä½“ä»¥å®ç°å®Œæ•´çš„å‰§æœ¬æ€ä½“éªŒï¼š

- **å¯åŠ¨ Lobby Agent**ï¼šè´Ÿè´£å¼•å¯¼ç©å®¶è¿›å…¥æ¸¸æˆå¹¶é€‰æ‹©å‰§æœ¬ã€‚

```bash
openagents agent start ~/script_world/agents/lobby.yaml
```

- **å¯åŠ¨ DM Agent**ï¼šè´Ÿè´£æ§åˆ¶å‰§æƒ…è¿›å±•å¹¶åˆ†å‘çº¿ç´¢ã€‚

```bash
openagents agent start ~/script_world/agents/dm.yaml
```

- **å¯åŠ¨ NPC Agents**ï¼šæ‰®æ¼”å‰§æœ¬ä¸­çš„è§’è‰²å¹¶ä¸ç©å®¶äº’åŠ¨ã€‚

```bash
openagents agent start ~/script_world/agents/npc1.yaml
openagents agent start ~/script_world/agents/npc2.yaml
openagents agent start ~/script_world/agents/npc3.yaml
```

### 6ï¼‰æ™ºèƒ½ä½“åä½œæœºåˆ¶ï¼ˆAgent Collaborationï¼‰

åœ¨ ScriptWorld ä¸­ï¼Œæ™ºèƒ½ä½“ä¹‹é—´é€šè¿‡ OpenAgents çš„ç½‘ç»œæ¶æ„è¿›è¡Œé«˜æ•ˆçš„åä½œã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½è´Ÿè´£ç‰¹å®šçš„ä»»åŠ¡ï¼Œé€šè¿‡ **gRPC** åè®®å’Œ **Messaging Mods** æ¨¡å—è¿›è¡Œæ¶ˆæ¯ä¼ é€’å’Œä»»åŠ¡åè°ƒã€‚

- **Network Layer**ï¼šç®¡ç†æ™ºèƒ½ä½“çš„è¿æ¥ã€æ¶ˆæ¯è·¯ç”±å’Œè§’è‰²ä¿¡æ¯çš„åˆ†å‘ã€‚
- **Messaging Mods**ï¼šæ”¯æŒæ™ºèƒ½ä½“ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚
- **Workspace Mods**ï¼šç”¨äºç®¡ç†å’Œç»„ç»‡æ¸¸æˆä¸­çš„å·¥ä½œåŒºä¸ä»»åŠ¡ã€‚

### 7ï¼‰ç”¨æˆ·è¡Œä¸ºä¸æ™ºèƒ½ä½“äº¤äº’æœºåˆ¶ï¼ˆUser Actions and Agent Interaction Flowï¼‰

ç”¨æˆ·ä¸ ScriptWorld çš„æ™ºèƒ½ä½“è¿›è¡Œäº¤äº’æ—¶ï¼Œå¯ä»¥é€šè¿‡ç®€æ´çš„æŒ‡ä»¤æ¥æ§åˆ¶æ¸¸æˆæµç¨‹ã€‚ä»¥ä¸‹æ˜¯ç”¨æˆ·ä¸æ™ºèƒ½ä½“çš„å…¸å‹äº¤äº’ï¼š

1. **å‰§æœ¬é€‰æ‹©é˜¶æ®µ**ï¼šç”¨æˆ·é€‰æ‹©å¯ç”¨çš„å‰§æœ¬ã€‚

   ```bash
   A / a   # é€‰æ‹©å‰§æœ¬
   ```

2. **å¼€å±€ç¡®è®¤é˜¶æ®µ**ï¼šç”¨æˆ·ç¡®è®¤æ˜¯å¦å¼€å§‹æ¸¸æˆã€‚

   ```bash
   æ˜¯ / å¦   # ç¡®è®¤å¼€å§‹æ¸¸æˆ
   ```

3. **æ¸¸æˆå¼€å§‹æˆ–äº¤äº’**ï¼šç”¨æˆ·è¾“å…¥ "æ¸¸æˆå¼€å§‹" è§¦å‘æ¸¸æˆæµç¨‹ã€‚

   ```bash
   æ¸¸æˆå¼€å§‹   # å¼€å§‹æ¸¸æˆå¹¶ä¸æ™ºèƒ½ä½“è¿›è¡Œäº¤äº’
   ```

4. **ç©å®¶äººæ•°é€‰æ‹©**ï¼šé€‰æ‹©æ¸¸æˆä¸­çš„ç©å®¶äººæ•°ã€‚

   ```bash
   1 / 2 / 3 / 4   # é€‰æ‹©ç©å®¶äººæ•°
   ```

### 8ï¼‰å®Œæ•´å¯åŠ¨æµç¨‹ç¤ºä¾‹

ä»¥ä¸‹æ˜¯å®Œæ•´çš„å¯åŠ¨æµç¨‹ï¼Œä»ç¯å¢ƒé…ç½®åˆ°å¯åŠ¨å¤šæ™ºèƒ½ä½“ç½‘ç»œã€‚

```bash
# 1. å®‰è£… OpenAgents
pip install openagents

# 2. æ¿€æ´» Conda ç¯å¢ƒ
conda activate openagents

# 3. å¯åŠ¨å¤šæ™ºèƒ½ä½“ç½‘ç»œ
openagents network start ~/script_world

# 4. é…ç½®å¤§è¯­è¨€æ¨¡å‹ç›¸å…³ç¯å¢ƒå˜é‡
export DEFAULT_LLM_MODEL_NAME="openai-gpt-5-mini"
export DEFAULT_LLM_PROVIDER="openai-compatible"
export DEFAULT_LLM_API_KEY="YOUR_API_KEY"
export DEFAULT_LLM_BASE_URL="https://model-gateway.openagents.org/v1"

# 5. å¯åŠ¨å„ä¸ªæ™ºèƒ½ä½“
openagents agent start ~/script_world/agents/lobby.yaml
openagents agent start ~/script_world/agents/dm.yaml
openagents agent start ~/script_world/agents/npc1.yaml
openagents agent start ~/script_world/agents/npc2.yaml
openagents agent start ~/script_world/agents/npc3.yaml
```

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```text
script_world/
â”œâ”€ agents/
â”‚  â”œâ”€ dm.yaml
â”‚  â”œâ”€ lobby.yaml
â”‚  â””â”€ npcs/
â”œâ”€ scripts/
â”œâ”€ scenarios/
â”œâ”€ events/
â”œâ”€ tools/
â”œâ”€ mods/
â”œâ”€ logs/
â”œâ”€ network.yaml
â””â”€ network.db
```

---

## ğŸ§ª è‡ªå®šä¹‰æ‰©å±•

### åˆ›å»ºæ–°å‰§æœ¬
è·¯å¾„ï¼š
```
scripts/<your_script_name>/
```

å»ºè®®åŒ…å«ï¼š
- ä¸–ç•Œè§‚ / èƒŒæ™¯
- è§’è‰²å¡
- æ—¶é—´çº¿
- åˆ†è½®çº¿ç´¢
- DM-only çœŸç›¸ï¼ˆå•ç‹¬æ–‡ä»¶ï¼‰

---

### æ–°å¢ Agent
1. æ–°å»º YAML
2. è®¾ç½®å”¯ä¸€ `agent_id`
3. åœ¨ `network.yaml` é…ç½®è·¯ç”±

---

## ğŸ—ƒï¸ æ•°æ®æŒä¹…åŒ–

- `network.db`ï¼šä¼šè¯ / çŠ¶æ€ / ç©å®¶æ•°æ®
- `logs/`ï¼šè¿è¡Œæ—¥å¿—ä¸å¤ç›˜

---

## ğŸ§° å¸¸è§é—®é¢˜

**Agent ä¸è¯´è¯**
- æ£€æŸ¥ `network.yaml`
- æŸ¥çœ‹ `logs/`

**è¾“å‡ºè¿‡äºå‘æ•£**
- é™ä½ `temperature`
- æé«˜ `max_tokens`

---

## ğŸ”’ å®‰å…¨å»ºè®®

- å‰§æœ¬åŒ…å«æ•æ„Ÿå†…å®¹æ—¶å¢åŠ  DM è¾¹ç•Œ
- å·¥å…·å±‚æ·»åŠ å®‰å…¨è¿‡æ»¤
- é¿å…å­˜å‚¨ä¸ªäººæ•æ„Ÿä¿¡æ¯

---

## ğŸ™Œ è‡´è°¢

- æ¶æ„åŸºäº OpenAgents åä½œ Agent ä½“ç³»  
- çµæ„Ÿæ¥è‡ªäº’åŠ¨å°è¯´ã€ç¤¾äº¤æ¨ç†ä¸æ¡Œæ¸¸ä¸»æŒæµç¨‹  
- é¢å‘ **å‰§æœ¬æ€ / RP / å¤šæ™ºèƒ½ä½“ç¼–æ’** çš„å¯æ‰©å±•åº•åº§
